{%extends 'Template.html'%}
{%block Title%}Crypto Index{%endblock%}
{%block style%}
<style>
    .indexpanel {
        margin: 50px;
        border-radius: 20px;
        background-color: #EDF5E1;
    }

    .indexpanel:hover {
        box-shadow: rgba(0, 0, 0, 0.35) 0px 10px 5px;
    }

    .indexpanel table {
        width: 100%;
    }

    .indexpanel th {
        padding: 15px;
        text-align: left;
        font-weight: bolder;
    }

    .indexpanel td {
        font-size: small;
        transition: box-shadow .5s;
        padding: 15px;
        font-weight: bold;
    }

    .indexpanel td a {
        color: black;
        text-decoration: none;
    }

    .indexpanel td:hover {
        box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
    }



    .indexpanel tr {
        transition: box-shadow .5s;
    }

    .indexpanel tr.obj:hover {
        box-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px;
    }
    .toppanel{
        display: flex;
        margin: 50px;
        text-align: center;
    }

    .smallpanel{
        transition: box-shadow .5s;
        margin-right: 50px;
        width: 300px;
        padding: 20px;
        background-color: #EDF5E1;
        border-radius: 20px;
    }
    .smallpanel:hover{
        box-shadow: rgba(0, 0, 0, 0.35) 0px 10px 5px;
    }
    .smallpanel .title{
        display: block;
        font-weight: bolder;
        margin-bottom: 10px;
        border-bottom: 2px solid grey;
    }
</style>
{%endblock%}
{%block content%}
<div class="toppanel">
    <div class="smallpanel">
        <span class="title">Total Coins</span>
        <span class="animatew" data-target="{{Data.stats.totalCoins}}"></span>
    </div>
    <div class="smallpanel">
        <span class="title">Total Markets</span>
        <span class="animatew" data-target="{{Data.stats.totalMarkets}}"></span>
    </div>
    <div class="smallpanel">
        <span class="title">Total Exchanges</span>
        <span class="animatew" data-target="{{Data.stats.totalExchanges}}"></span>
    </div>
    <div class="smallpanel">
        <span class="title">Total Market Cap</span>
        <span class="animate" data-target="{{Data.stats.totalMarketCap}}"></span>
    </div>
    <div class="smallpanel">
        <span class="title">Total 24H Volume</span>
        <span class="animate" data-target="{{Data.stats.total24hVolume}}"></span>
    </div>
</div>
<div class="indexpanel">
    <table>
        <colgroup>
            <col span="1" style="width: 5%;">
            <col span="1" style="width: 20%;">
            <col span="1" style="width: 8%;">
            <col span="1" style="width: 9%;">
            <col span="1" style="width: 20%;">
            <col span="1" style="width: 20%;">
            <col span="1" style="width: 16%;">
        </colgroup>
        <tr>
            <th>Rank</th>
            <th>Name</th>
            <th>% Change</th>
            <th>Price</th>
            <th>24h Volume</th>
            <th>Market Cap</th>
            <th>Listed At</th>
        </tr>
        {%for i in Data.coins%}
        <tr class="obj">
            <td>#{{i.rank}}</td>

            <td>
                <img src="{{i.iconUrl}}" style="width: 20px;height: 20px;vertical-align:middle;"></img>
                <a href="http://127.0.0.1:8000/Cryptos/{{i.uuid}}">
                    <span>{{i.name}}({{i.symbol}})</span>
                </a>
            </td>
            </a>
            <td style="text-align: right;"><span class="filterint">{{i.change}}</span></td>
            <td style="text-align: right;">$<span class="filterint" data-target="{{i.price}}">{{i.price}}</span></td>
            
            <td style="text-align: right;">$<span class="filterint" data-target="{{i.24hVolume}}">{{i.24hVolume}}</span></td>
            <td style="text-align: right;">$<span class="filterint" data-target="{{i.marketCap}}">{{i.marketCap}}</span></td>
            <td style="text-align: right;"><span class="epoch">{{i.listedAt}}</span></td>
        </tr>
        {%endfor%}
    </table>
</div>

<script>
    let ep = document.querySelectorAll(".epoch");
    ep.forEach(element => {
        element.innerHTML = convertepoch(element.innerHTML);
    });

    function convertepoch(date){
        var myDate = new Date(date*1000);
        return myDate.toLocaleString();
    }
    
</script>
{%endblock%}